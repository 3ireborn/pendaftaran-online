<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>NPA Smart System v5.2.1 â€” Admin Pusat</title>
  <style>
    body {font-family: Poppins, system-ui, sans-serif; background:#f7f9fc; color:#222; margin:0;}
    header {background:#0b3d91; color:#fff; padding:14px 20px; text-align:center;}
    main {max-width:1000px; margin:auto; padding:20px;}
    .btn {background:#0b3d91; color:#fff; border:0; padding:10px 18px; border-radius:6px; cursor:pointer; font-weight:600;}
    .btn.alt {background:#eaf2ff; color:#0b3d91;}
    section {background:#fff; border-radius:10px; padding:20px; margin-bottom:16px; box-shadow:0 4px 12px rgba(0,0,0,.05);}
    h2 {color:#0b3d91; margin-top:0;}
    .logbox {background:#eef5ff; border-left:5px solid #0b3d91; border-radius:6px; padding:10px; height:250px; overflow:auto; font-size:.9em;}
    footer {text-align:center; font-size:.85em; color:#888; padding:12px;}
  </style>
</head>
<body>
  <header>
    <h1>ğŸ“¡ NPA Smart System v5.2.1</h1>
    <div>Admin Pusat â€” Auto Follow-Up + AI Broadcast</div>
  </header>

  <main>
    <section>
      <h2>ğŸ” Token Fonnte</h2>
      <p>Masukkan atau perbarui token Fonnte Anda di sini.</p>
      <button class="btn alt" id="setTokenBtn">Set Token</button>
      <span id="tokenStatus">ğŸ”´ Belum diatur</span>
    </section>

    <section>
      <h2>ğŸ“ Follow-Up Manual</h2>
      <p>Klik tombol di bawah ini untuk mengirim pesan follow-up ke semua Leader yang terdaftar di sistem.</p>
      <button class="btn" id="followUpNow">ğŸš€ FollowUp Now</button>
    </section>

    <section>
      <h2>ğŸ“‹ Log Aktivitas</h2>
      <div class="logbox" id="logBox"></div>
    </section>
  </main>

  <footer>
    #Terkirim dengan ğŸ’ dari NPA Smart System | Smart Auto Broadcast by 3iReborn || NPA Team ğŸš€
  </footer>

<script>
// ===============================
// âš™ï¸ Konfigurasi Dasar
// ===============================
const FONNTE_BASE_URL = "https://api.fonnte.com/send";
const LEADERS = [
  "6285218453131","6285932684440","62881011823140","6281388675615",
  "6282199558169","6281327498929","6281285949074","966563414575",
  "6586210326","6281236544821","6282252161911","6281236781273","6288293744431"
];
const MOTIVATION_MESSAGES = [
  "ğŸ’« Setiap hari adalah peluang baru untuk menjemput rezeki. Tetap semangat ğŸ’ª #Terkirim dengan ğŸ’ dari NPA Smart System ğŸš€",
  "ğŸŒ… Jangan takut gagal, takutlah kalau kamu berhenti mencoba. #NPA #3iReborn ğŸš€",
  "ğŸ”¥ Rezeki tidak akan salah alamat, yang penting terus bergerak dengan niat baik ğŸ’¼ #SmartSystem #3iNetworks",
  "ğŸ’ª Jadikan hari ini luar biasa dengan semangat yang tak biasa! #Terkirim dari NPA Smart System ğŸš€",
  "ğŸš€ Kesuksesan adalah hasil dari kebiasaan kecil yang dilakukan setiap hari. Yuk lanjutkan perjuanganmu! #3iReborn"
];

// ===============================
// ğŸ§  Fungsi Log dan Token
// ===============================
function addLog(text) {
  const logBox = document.getElementById("logBox");
  const line = document.createElement("div");
  const t = new Date().toLocaleTimeString("id-ID",{hour12:false});
  line.textContent = `[${t}] ${text}`;
  logBox.prepend(line);
}
function getToken() { return localStorage.getItem("fonnte_token") || ""; }
function setToken(token) {
  localStorage.setItem("fonnte_token", token);
  document.getElementById("tokenStatus").textContent = token ? "ğŸŸ¢ Token aktif" : "ğŸ”´ Belum diatur";
}

// ===============================
// ğŸ“¤ Kirim Pesan ke API Fonnte
// ===============================
async function sendFonnte(target, text) {
  const token = getToken();
  if (!token) throw new Error("Token belum diatur.");
  const res = await fetch(FONNTE_BASE_URL, {
    method: "POST",
    headers: { "Authorization": token, "Content-Type": "application/json" },
    body: JSON.stringify({ target, message: text })
  });
  if (!res.ok) throw new Error("HTTP " + res.status);
  return true;
}

// ===============================
// ğŸš€ Follow-Up Manual
// ===============================
async function manualFollowUp() {
  addLog("ğŸš€ Follow-Up manual dimulai...");
  const msg = MOTIVATION_MESSAGES[Math.floor(Math.random()*MOTIVATION_MESSAGES.length)];
  for (const phone of LEADERS) {
    try {
      await sendFonnte(phone, msg);
      addLog(`âœ… ${phone} terkirim`);
    } catch (err) {
      addLog(`âŒ ${phone} gagal: ${err.message}`);
    }
  }
  addLog("âœ¨ Follow-Up selesai!");
}

// ===============================
// ğŸ§© Event Listener
// ===============================
document.getElementById("setTokenBtn").onclick = () => {
  const cur = getToken();
  const newTok = prompt("Masukkan token Fonnte:", cur || "");
  if (newTok !== null) setToken(newTok.trim());
};
document.getElementById("followUpNow").onclick = manualFollowUp;
document.addEventListener("DOMContentLoaded", () => {
  if (getToken()) document.getElementById("tokenStatus").textContent = "ğŸŸ¢ Token aktif";
});
</script>

</body>
</html>
