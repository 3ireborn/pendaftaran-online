<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Admin Smart v8 â€“ 3iReborn (Biru Tua)</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f3f7ff;
  --card:#ffffff;
  --text:#06204a;
  --muted:#5d6b86;
  --brand:#0b3d91;
  --accent:#1d6dff;
  --green:#25D366;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins, sans-serif;
  background:var(--bg);
  color:var(--text);
  padding-bottom:40px;
}

.container{
  max-width:900px;
  margin:0 auto;
  padding:20px;
}

.title{
  font-size:26px;
  font-weight:700;
  text-align:center;
  margin-top:20px;
  margin-bottom:30px;
  color:var(--brand);
}

.card{
  background:var(--card);
  padding:20px;
  border-radius:16px;
  margin-bottom:22px;
  box-shadow:0 4px 12px rgba(0,0,0,0.05);
}

label{
  font-size:15px;
  font-weight:600;
  margin-bottom:8px;
  display:block;
}

input{
  width:100%;
  padding:14px;
  border-radius:10px;
  border:1px solid #cbd5e1;
  font-size:15px;
  margin-bottom:18px;
}

button{
  width:100%;
  padding:15px;
  background:var(--green);
  border:none;
  border-radius:12px;
  font-size:17px;
  font-weight:600;
  color:#fff;
  cursor:pointer;
}

button:hover{
  opacity:0.9;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
  font-size:14px;
}

th,td{
  padding:12px 8px;
  border-bottom:1px solid #e2e8f0;
  text-align:left;
}

th{
  background:#e9f1ff;
  font-weight:600;
}
.action-btn{
  background:var(--accent);
  padding:6px 10px;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-size:13px;
}
.toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:#1d6dff;
  color:#fff;
  padding:12px 20px;
  border-radius:8px;
  display:none;
}
</style>
</head>

<body>

<div class="container">
  <div class="title">Admin Smart v8 <br> 3iReborn â€“ Biru Tua</div>

  <!-- INPUT FORM -->
  <div class="card">
    <label>Nama Leader</label>
    <input id="inName" placeholder="cth: Sugiarto Kurniawan">

    <label>No. WhatsApp Leader</label>
    <input id="inPhone" placeholder="628xxxxxxx">

    <button id="btnAddLeader">Tambah Leader</button>
  </div>

  <!-- TABLE -->
  <div class="card">
    <h3 style="margin-top:0;margin-bottom:15px;text-align:center;">Daftar Leader</h3>

    <table>
      <thead>
        <tr>
          <th>No</th>
          <th>Nama</th>
          <th>WA</th>
          <th>Slug</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody id="leaderTableBody"></tbody>
    </table>
  </div>
</div>

<div id="toast" class="toast"></div>

<script>
// ===== UTIL =====
const toast = (msg)=>{
  const t=document.getElementById("toast");
  t.innerHTML=msg;
  t.style.display="block";
  setTimeout(()=>t.style.display="none",2000);
};

const loadLeaders = () =>{
  return JSON.parse(localStorage.getItem("leaders")||"[]");
};

const saveLeaders = (arr)=>{
  localStorage.setItem("leaders",JSON.stringify(arr));
};

// ===== RENDER TABLE =====
function renderTable(){
  const arr = loadLeaders();
  const tbody = document.getElementById("leaderTableBody");
  tbody.innerHTML = "";

  arr.forEach((l,i)=>{
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${i+1}</td>
      <td>${l.name}</td>
      <td>${l.phone}</td>
      <td>${l.slug}</td>
      <td>
        <button class="action-btn" onclick="__downloadLP(${i})">Download LP</button>
      </td>
    `;
    tbody.appendChild(row);
  });
}

// ===== GENERATE LP HTML =====
function generateLP(l){
return `
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LP Hot - ${l.name}</title>
</head>
<body>
<h2>Pendaftaran Online 3iReborn</h2>
<p>Leader: <b>${l.name}</b></p>
<p>WA: <b>${l.phone}</b></p>

<a href="https://wa.me/${l.phone}?text=Halo%20Saya%20minat" 
style="padding:14px 20px;background:#25D366;color:#fff;text-decoration:none;border-radius:8px;">
Chat WhatsApp Leader</a>

</body>
</html>
`;
}

// ===== DOWNLOAD LP =====
function __downloadLP(i){
  const arr = loadLeaders();
  if(!arr[i]) return;

  const l = arr[i];
  const html = generateLP(l);

  const blob = new Blob([html], {type:"text/html"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = `lp-${l.slug}.html`;
  document.body.appendChild(a);
  a.click();
  a.remove();
}

// ===== ADD LEADER =====
document.getElementById("btnAddLeader").onclick = ()=>{
  const name = document.getElementById("inName").value.trim();
  const phone = document.getElementById("inPhone").value.trim();

  if(!name || !phone){
    toast("Nama dan nomor WA wajib diisi");
    return;
  }

  const slug = name.toLowerCase().replace(/[^a-z0-9]+/g,"-");

  const arr = loadLeaders();
  arr.push({ name, phone, slug });
  saveLeaders(arr);

  document.getElementById("inName").value="";
  document.getElementById("inPhone").value="";

  renderTable();
  toast("Leader berhasil ditambahkan!");
};

// ===== INITIAL LOAD =====
renderTable();
toast("Admin siap digunakan ðŸš€");
</script>

</body>
</html>
