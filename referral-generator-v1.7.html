<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Referral Generator - 3IReborn</title>

<style>
    body{
        margin:0;
        font-family:Arial, sans-serif;
        background:#061537;
        color:#fff;
    }
    h1{
        text-align:center;
        color:#ffd700;
        font-size:28px;
        margin-top:20px;
    }
    .box{
        width:90%;
        margin:20px auto;
        background:#0c1f4a;
        padding:20px;
        border-radius:18px;
        border:3px solid #ffd700;
    }
    label{
        font-size:16px;
        font-weight:bold;
        margin:10px 0 5px;
        display:block;
        color:#ffd700;
    }
    input{
        width:100%;
        padding:14px;
        border-radius:10px;
        border:2px solid #ffd700;
        margin-bottom:12px;
        font-size:16px;
    }
    button{
        width:100%;
        padding:16px;
        background:#1f6bff;
        color:white;
        font-size:18px;
        border:none;
        border-radius:12px;
        margin-top:10px;
        font-weight:bold;
    }
    #linksBox{
        margin-top:20px;
        display:none;
    }
    a{
        color:#8bb8ff;
        word-wrap:break-word;
        display:block;
        margin-bottom:10px;
    }

    /* SOCIAL CARD STYLE A (foto bulat premium) */
    #cardBox{
        width:90%;
        margin:25px auto;
        background:#0c1f4a;
        padding:20px;
        border-radius:20px;
        border:3px solid #ffd700;
        display:none;
    }
    #cardPhoto{
        width:180px;
        height:180px;
        border-radius:50%;
        object-fit:cover;
        border:6px solid #ffd700;
        display:block;
        margin:10px auto;
    }
    #cardName{
        text-align:center;
        font-size:26px;
        font-weight:bold;
        margin-top:10px;
    }
    #cardInfo{
        text-align:center;
        margin:5px 0 16px;
        font-size:16px;
    }
    #qrCanvas{
        display:block;
        margin:10px auto;
        padding:12px;
        background:white;
        border-radius:16px;
    }

    .waBtn, .dlBtn{
        width:100%;
        padding:16px;
        font-size:18px;
        border-radius:12px;
        border:none;
        color:white;
        margin-top:10px;
    }
    .waBtn{ background:#25D366; }
    .dlBtn{ background:#ff4f4f; }

</style>
</head>

<body>

<h1>ðŸ”— Referral Generator</h1>

<div class="box">
    <label>Nama Leader</label>
    <input id="name" placeholder="sugiarto">

    <label>Nomor WA Leader</label>
    <input id="wa" placeholder="628xxxxxxx">

    <label>Slug (ID unik)</label>
    <input id="slug" placeholder="contoh: sugiarto-ksm">

    <label>Upload Foto Leader</label>
    <input type="file" id="photo" accept="image/*">

    <button onclick="generate()">ðŸ”— Buat Link & QR</button>
</div>

<div id="linksBox" class="box">
    <h2 style="text-align:center; color:#ffd700;">Link Siap Pakai</h2>
    <a id="lpMaster"></a>
    <a id="lpHot"></a>
    <a id="formReg"></a>

    <button class="waBtn" onclick="shareWA()">Bagikan ke WhatsApp</button>
</div>

<!-- SOCIAL CARD -->
<div id="cardBox">
    <img id="cardPhoto" />
    <div id="cardName"></div>
    <div id="cardInfo">Scan QR untuk membuka link referral</div>
    <canvas id="qrCanvas"></canvas>
    <button class="dlBtn" onclick="downloadCard()">Download Social Card</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<script>
function generate(){
    let name = document.getElementById("name").value.trim();
    let wa = document.getElementById("wa").value.trim();
    let slug = document.getElementById("slug").value.trim();

    if(!name || !wa || !slug){
        alert("Isi semua data dulu beb ðŸ™");
        return;
    }

    let base = "https://3ireborn.github.io/pendaftaran-online/";

    let lpMaster = base+"lp-master-v6.6.html?leader="+slug+"&wa="+wa;
    let lpHot    = base+"lp-hot-v6.6.html?leader="+slug+"&wa="+wa;
    let formReg  = base+"index-v2.html?leader="+slug+"&wa="+wa;

    document.getElementById("lpMaster").textContent = lpMaster;
    document.getElementById("lpMaster").href = lpMaster;

    document.getElementById("lpHot").textContent = lpHot;
    document.getElementById("lpHot").href = lpHot;

    document.getElementById("formReg").textContent = formReg;
    document.getElementById("formReg").href = formReg;

    document.getElementById("linksBox").style.display = "block";

    // QR for LP Master (utama)
    let qr = new QRious({
        element: document.getElementById("qrCanvas"),
        value: lpMaster,
        size: 260,
        background: "white",
        foreground: "#f8d400"
    });

    // buat social card
    let file = document.getElementById("photo").files[0];
    if(file){
        let reader = new FileReader();
        reader.onload = function(e){
            document.getElementById("cardPhoto").src = e.target.result;
            document.getElementById("cardName").textContent = name;
            document.getElementById("cardBox").style.display = "block";
        };
        reader.readAsDataURL(file);
    } else {
        document.getElementById("cardPhoto").src = "https://via.placeholder.com/300x300.png?text=No+Photo";
        document.getElementById("cardName").textContent = name;
        document.getElementById("cardBox").style.display = "block";
    }
}

function shareWA(){
    let text =
        "Assalamu'alaikum ðŸ™\n" +
        "Berikut link informasi 3I Reborn Anda:\n\n" +
        document.getElementById("lpMaster").href + "\n" +
        document.getElementById("lpHot").href + "\n" +
        document.getElementById("formReg").href;

    let url = "https://wa.me/?text=" + encodeURIComponent(text);
    window.open(url, "_blank");
}

function downloadCard(){
    html2canvas(document.getElementById("cardBox")).then(canvas=>{
        let a = document.createElement("a");
        a.href = canvas.toDataURL("image/png");
        a.download = "social-card-3ireborn.png";
        a.click();
    });
}
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</body>
</html>
