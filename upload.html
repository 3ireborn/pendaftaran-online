<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Upload PDF ke GitHub - 3IReborn</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        max-width: 500px;
        margin: auto;
    }
    input, button {
        width: 100%;
        padding: 12px;
        margin-top: 10px;
        font-size: 16px;
    }
    button {
        background: #28a745;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 8px;
    }
    button:hover {
        background: #218838;
    }
</style>
</head>
<body>

<h2>ğŸ“¤ Upload PDF ke GitHub (Folder ilustrasi)</h2>

<p><strong>Repo:</strong> 3ireborn / pendaftaran-online / ilustrasi</p>

<label>ğŸ’¡ Masukkan GitHub Token (tidak akan disimpan)</label>
<input type="password" id="token" placeholder="github_pat_xxxxxxxxxxxxxxxxx">

<label>Pilih file PDF</label>
<input type="file" id="fileInput" accept="application/pdf">

<button onclick="upload()">ğŸš€ Upload ke GitHub</button>

<p id="status"></p>

<script>
async function upload() {
    const token = document.getElementById("token").value.trim();
    const fileInput = document.getElementById("fileInput");
    const status = document.getElementById("status");

    if (!token) {
        alert("Token belum diisi.");
        return;
    }
    if (!fileInput.files.length) {
        alert("Pilih file PDF dulu.");
        return;
    }

    const file = fileInput.files[0];
    const fileName = file.name;
    const reader = new FileReader();

    reader.onloadend = async () => {
        const content = reader.result.split(",")[1]; // base64

        status.innerHTML = "â³ Mengupload... tunggu sebentar...";

        const response = await fetch(
            `https://api.github.com/repos/3ireborn/pendaftaran-online/contents/ilustrasi/${fileName}`, 
            {
                method: "PUT",
                headers: {
                    "Authorization": `token ${token}`,
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    message: `Upload ${fileName}`,
                    content: content
                })
            }
        );

        if (response.ok) {
            status.innerHTML = "âœ… Berhasil di-upload ke GitHub!";
        } else {
            status.innerHTML = "âŒ Gagal upload. Error: " + response.statusText;
        }
    };

    reader.readAsDataURL(file);
}
</script>

</body>
</html>
