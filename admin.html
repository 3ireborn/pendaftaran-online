<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin Panel - NPA Digital System</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&display=swap" rel="stylesheet">
<style>
body{font-family:'Poppins',sans-serif;margin:0;background:#f8fafc;color:#1e293b}
.container{max-width:700px;margin:40px auto;padding:20px;background:#fff;border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,.08);}
h1{text-align:center;color:#0b3d91;margin-bottom:20px}
input{width:100%;padding:12px;border:1px solid #ccc;border-radius:10px;margin-bottom:10px;font-size:15px}
button{background:#0b3d91;color:#fff;border:none;border-radius:10px;padding:14px 20px;font-weight:600;cursor:pointer;width:100%;font-size:15px}
button:hover{filter:brightness(0.95)}
.list{margin-top:25px}
.item{background:#f1f5f9;border-radius:10px;padding:12px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center}
.actions button{margin-left:5px;padding:8px 14px;font-size:13px}
.lp-master{background:#16a34a}
.lp-hot{background:#d97706}
.lp-form{background:#0ea5e9}
.delete{background:#dc2626}
.code{font-weight:600;color:#0b3d91}
footer{text-align:center;font-size:13px;color:#64748b;margin-top:20px}
</style>
</head>
<body>

<div class="container">
  <h1>ðŸ§­ Admin Panel 3iReborn â€” NPA</h1>

  <input type="text" id="name" placeholder="Nama Leader (contoh: Sugiarto Kurniawan)">
  <input type="tel" id="phone" placeholder="No WA (628xxxxxxxxxx)">
  <button onclick="addLeader()">+ Tambah Leader</button>

  <div class="list" id="list"></div>
  <footer>Â© 2025 Nganggur Preneur Akademi</footer>
</div>

<script>
let leaders = JSON.parse(localStorage.getItem("leaders") || "[]");

function save(){localStorage.setItem("leaders", JSON.stringify(leaders));}
function slugify(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"").trim();}
function genCode(name,index){const ini=name.split(" ").map(w=>w[0]).join("").toUpperCase();return `${ini}${(index+1).toString().padStart(3,"0")}`;}

function render(){
  const list=document.getElementById("list");
  list.innerHTML="";
  leaders.forEach((l,i)=>{
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`<div><span class="code">${l.code}</span> â€” ${l.name}<br><small>${l.phone}</small></div>
    <div class="actions">
      <button class="lp-master" onclick="openLP('${l.slug}','master')">LP Master</button>
      <button class="lp-hot" onclick="openLP('${l.slug}','hot')">LP Hot</button>
      <button class="lp-form" onclick="openLP('${l.slug}','form')">Form Daftar</button>
      <button class="delete" onclick="delLeader(${i})">Hapus</button>
    </div>`;
    list.appendChild(div);
  });
}

function addLeader(){
  const name=document.getElementById("name").value.trim();
  const phone=document.getElementById("phone").value.trim();
  if(!name || !phone) return alert("Isi nama dan nomor WA dulu ya beb ðŸ˜˜");
  const slug=slugify(name);
  const code=genCode(name,leaders.length);
  leaders.push({name,phone,slug,code});
  save();render();
  document.getElementById("name").value="";
  document.getElementById("phone").value="";
  alert(`âœ… Leader ${name} ditambahkan!\nKode otomatis: ${code}`);
}

function delLeader(i){
  if(confirm("Yakin mau hapus leader ini?")){
    leaders.splice(i,1);save();render();
  }
}

function openLP(slug,type){
  let base="https://3ireborn.github.io/pendaftaran-online";
  let url="";
  if(type==="master") url=`${base}/master-lp.html?leader=${slug}`;
  else if(type==="hot") url=`${base}/lp-hot.html?leader=${slug}`;
  else if(type==="form") url=`${base}/index.html?leader=${slug}`;
  window.open(url,"_blank");
}

render();
</script>
</body>
</html>
