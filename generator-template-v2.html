<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Template Generator â€“ 3iReborn</title>

<style>
    body{
        font-family: Arial, sans-serif;
        background:#0b1a33;
        color:#fff;
        margin:0;
        padding:0;
    }
    .wrap{
        max-width:600px;
        margin:auto;
        padding:20px;
    }
    h2{text-align:center;margin-bottom:20px;color:#ffd260}
    label{font-weight:bold;margin-top:15px;display:block;color:#ffd260}
    input{
        width:100%;padding:12px;border-radius:10px;
        border:2px solid #ffd260;background:#0d2247;color:#fff;
        margin-top:6px;font-size:16px;
    }
    button{
        width:100%;padding:15px;margin-top:20px;border:0;
        border-radius:10px;background:#ffd260;color:#0b1a33;
        font-weight:bold;font-size:18px;cursor:pointer;
    }
    button:hover{background:#ffcc33}

    .preview-box{
        border:2px solid #ffd260;
        border-radius:15px;
        background:#0d2247;
        padding:20px;
        margin-top:25px;
        text-align:center;
    }

    .card{
        width:100%;
        background:#fff;
        border-radius:20px;
        padding:15px;
        color:#000;
        text-align:center;
    }

    .qr{
        margin-top:10px;
    }

    .download-btn{
        background:#25D366;
        color:#fff;
        margin-top:15px;
    }
</style>
</head>

<body>
<div class="wrap">

<h2>TEMPLATE GENERATOR<br>3iReborn</h2>

<label>Nama Leader</label>
<input type="text" id="nama" placeholder="contoh: Sugiarto KSM">

<label>Nomor WhatsApp</label>
<input type="text" id="wa" placeholder="contoh: 6282240001731 / 966xxxx / 65xxxx">

<label>Slug (Opsional)</label>
<input type="text" id="slug" placeholder="contoh: ksm-mendunia">

<button onclick="generate()">BUAT LINK & QR CODE</button>

<div id="preview" class="preview-box" style="display:none;">
    <h3 style="color:#ffd260;margin-top:0;">Preview</h3>
    <div id="card" class="card"></div>
    <button class="download-btn" onclick="downloadPNG()">Download Social Card (PNG)</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script>

function normalize(number){
    return number.replace(/[^0-9]/g,'').trim();
}

function generate(){
    let nama = document.getElementById("nama").value.trim();
    let wa   = normalize(document.getElementById("wa").value);
    let slug = document.getElementById("slug").value.trim().toLowerCase();

    if(!nama || !wa){
        alert("Nama dan nomor WhatsApp wajib diisi!");
        return;
    }

    let s = slug ? slug : nama.toLowerCase().replace(/\s+/g,'-');

    let base = "https://3ireborn.github.io/pendaftaran-online";

    let lpMaster = `${base}/lp-master-v6.6.html?name=${encodeURIComponent(nama)}&wa=${wa}&slug=${s}`;
    let lpHot    = `${base}/lp-hot-v6.6.html?name=${encodeURIComponent(nama)}&wa=${wa}&slug=${s}`;
    let form     = `${base}/form-pendaftaran-v3.1.html?name=${encodeURIComponent(nama)}&wa=${wa}&slug=${s}`;

    let card = document.getElementById("card");
    card.innerHTML = `
        <img src="https://i.ibb.co/QmJR8Gk/logo-3ireborn-gold.png" width="120">
        <h2 style="margin:10px 0;">${nama}</h2>
        <p style="margin:5px 0;">WhatsApp: ${wa}</p>
        <canvas id="qr"></canvas>
    `;

    let qrCanvas = document.getElementById("qr");

    let qr = new QRious({
        element: qrCanvas,
        value: lpMaster,
        size: 180
    });

    window.master = lpMaster;
    window.hot = lpHot;
    window.form = form;

    document.getElementById("preview").style.display = "block";
}

function downloadPNG(){
    html2canvas(document.getElementById("card")).then(canvas=>{
        let link = document.createElement("a");
        link.download = "social-card-3ireborn.png";
        link.href = canvas.toDataURL();
        link.click();
    });
}

</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</body>
</html>
